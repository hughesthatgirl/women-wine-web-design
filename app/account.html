<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Account Information</title>
    <link href="https://fonts.googleapis.com/css?family=Bree+Serif|Open+Sans:400,700" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
  </head>
  <body>
    <header>
      <div class="logo">Account Information</div>
      <nav>
        <a href="index.html">Dashboard</a>
        <a href="account.html">Account Information</a>
        <a href="send.html">Send Money</a>
      </nav>
    </header>
    <main>
      <section>
       <div>
           <h2>Transaction Details</h2>
            <form id="transaction">
              <label for="desc">Description:</label>
              <input type="text" id="desc" />
              <label for="type">Transaction Type:</label>
              <select id="type">
                <option value="withdrawl">Withdrawl</option>
                <option value="deposit">Deposit</option>
              </select>
              <label for="amount">Amount:</label>
              <input type="number" id="amount" />
              <button type="submit">Add Transaction</button>
            </form>
       </div>
      </section>
      <section>
        <div>
          <table id="list">
            <tr>
              <th>Item</th>
              <th>Description</th>
              <th>Amount</th>
            </tr>
          </table>
          <p>Total: $<span id="total" /></p>
        </div>
      </section>
    </main>
    <footer>
      <p>&copy;2018 Your Name Here | Women Wine &amp; More Web Design</p>
    </footer>
    
    <script type="text/javascript">
      /* ==========================================================
      Any variables set outside of everything are known as "global" variables and can be accessed from any function within this <script> tag.
      ========================================================== */
      var form = document.getElementById("transaction");
      var globalCount = 1;
      var currentTotal = 0;
      
      
      /* ==========================================================
      New Function: "updateTable(obj)"

      Takes One (1) Arguments/Parameters: 
        1: "obj" - the object created with the form values that were submitted

      Using the data from the form that was collected, a new table row is created and added to the table on the page.
      
      Depending on the transaction "type" will change the way the last cell is displayed.
      
      The "+=" syntax means to add the following piece of code to itself.  
      
      For example:
  
      foo += "bar" 
      ...is the same as...
      foo = foo + "bar"
    
      To determine the transaction type we are using an If..Else.. statement.
      
      IF (it has the "type" value of "deposit")
      THEN we display the first block of code...
      ELSE (it does NOT have the "type" value of "deposit")
      THEN we display the second block of code...
      ========================================================== */
      function updateTable(formObj){
        // Add new row to Transaction Table
        var row = document.getElementById("list").insertRow(-1);

        // Calculate & Display Item # with "globalCount" variable & increment
        row.innerHTML = "<td>" + globalCount + "</td>";
        globalCount++;

        // Display description
        row.innerHTML += "<td>" + formObj.desc + "</td>";

        // Determine Transaction Display Type with If..Else..
        if(formObj.type === "deposit"){
          row.innerHTML += "<td class='green'>+$" + formObj.amount + "</td>"; 
        } else {
          row.innerHTML += "<td class='red'>-$" + formObj.amount + "</td>"; 
        }
      }
      
      /* ==========================================================
      New Function: "calculateTotal(type, amount)"
      
      Takes TWO (2) Arguments/Parameters: 
        1: "type" - the value of form input id "type"
        2: "amount" - the value of form input id "amount"
      
      Depending what the "type" is will either add or subtract the amount from the global variable "currentTotal" which we are saving.
      
      Adding the "+" before the variable when calling them converts the value to a number.
      
      Final step is to replace the total in the div on the page.
      ========================================================== */
      function updateTotal(type, amount){
        if(type === "withdrawl") {
          currentTotal = +currentTotal - +amount;  
        } else {
          currentTotal = +currentTotal + +amount;
        }
        
        document.getElementById("total").innerHTML = currentTotal;
      }
      
      /* ==========================================================
      This is this same type of event listener from the other page.
      Only difference is we are now calling other functions.
      ========================================================== */
      form.addEventListener("submit", function(e){
        e.preventDefault();
        
        // Find Current Form Values & Create Object
        var formObj = {
          type: document.getElementById("type").value,
          desc: document.getElementById("desc").value,
          amount: document.getElementById("amount").value
        }
        
        updateTable(formObj);  // Update Table
        updateTotal(formObj.type, formObj.amount);  // Calculate New Total
        form.reset(); // Reset Form
      })
      
      
      /* ==========================================================
      New Function: "window.onload"
      
      Takes ZERO (0) Arguments / Parameters.
      
      This is run whenever the page is loaded or refreshed.
      ========================================================== */
      window.onload = function(){
        document.getElementById("total").textContent = currentTotal;
      }
      
    </script>
  </body>
</html>
